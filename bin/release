#!/usr/bin/env bash
# bin/release <build-dir>
# Make sure that our storage device is a mounted EBS volume

BUILD_DIR=$1

# Make a list of the data dirs for usage by elastic
DATA_DIRS=""
for dir in $(echo $ES_DATA_DIRS); do
  DATA_DIRS="${DATA_DIRS}$dir,"
done
# Remove the trailing comma
DATA_DIRS=${DATA_DIRS:0:(${#DATA_DIRS}-1)}

cat << EOF
---
default_process_types:
  web: "/usr/share/elasticsearch/bin/elasticsearch -Des.path.conf=$HOME/app -Des.http.port=$PORT -Des.path.data=${DATA_DIRS}"
EOF
